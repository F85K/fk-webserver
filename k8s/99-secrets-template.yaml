# Kubernetes Secrets Template for FK Webstack
# This file contains TEMPLATES only - actual values come from .env.local
# Deploy with: envsubst < k8s/99-secrets-template.yaml | kubectl apply -f -

---
apiVersion: v1
kind: Secret
metadata:
  name: fk-api-secrets
  namespace: fk-webstack
  labels:
    app: fk-webstack
    component: api
type: Opaque
stringData:
  # MongoDB credentials (if MongoDB uses auth)
  MONGO_INITDB_ROOT_USERNAME: "root"
  MONGO_INITDB_ROOT_PASSWORD: "${MONGO_ROOT_PASSWORD}"
  MONGO_PASSWORD: "${MONGO_ROOT_PASSWORD}"
  
  # API configuration
  API_CONTAINER_ID: "${API_CONTAINER_ID}"
  
  # Database connection
  MONGO_URI: "mongodb://root:${MONGO_ROOT_PASSWORD}@fk-mongodb:27017/admin"

---
apiVersion: v1
kind: Secret
metadata:
  name: mongo-credentials
  namespace: fk-webstack
  labels:
    app: fk-webstack
    component: database
type: Opaque
stringData:
  root-username: "root"
  root-password: "${MONGO_ROOT_PASSWORD}"
  username: "fk-user"
  password: "${MONGO_ROOT_PASSWORD}"

---
apiVersion: v1
kind: Secret
metadata:
  name: argocd-admin-password
  namespace: argocd
  labels:
    app: argocd
    component: server
type: Opaque
stringData:
  password: "${ARGOCD_ADMIN_PASSWORD}"

---
# NOTE: Do NOT commit this file with actual values!
# Usage:
#   1. Copy .env.local to your local environment
#   2. Load environment variables: export $(cat .env.local | grep -v '^#' | xargs)
#   3. Deploy: envsubst < k8s/99-secrets-template.yaml | kubectl apply -f -
