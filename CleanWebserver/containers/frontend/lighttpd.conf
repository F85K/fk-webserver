# FK Webstack - Lighttpd Configuration
# 
# This is a minimal configuration for serving static files
# with proxy support for FastAPI backend

# Server configuration
server.port = 80
server.bind = "0.0.0.0"

# Document root (where index.html is served from)
server.document-root = "/var/www/html"

# Enable indexing (serve index.html when accessing /)
index-file.names = ("index.html")

# Log configuration
server.errorlog = "/var/log/lighttpd/error.log"
accesslog.filename = "/var/log/lighttpd/access.log"

# Enable modules for static file serving and proxy
server.modules = (
    "mod_accesslog",
    "mod_proxy",
)

# Proxy configuration - forward API requests to FastAPI backend
proxy.server = (
    "/api" => (
        (
            "host" => "fk-api",
            "port" => 8000,
        )
    ),
)

# MIME types (content types for files)
mimetype.assign = (
    ".html" => "text/html",
    ".txt" => "text/plain",
    ".jpg" => "image/jpeg",
    ".png" => "image/png",
    ".gif" => "image/gif",
    ".js" => "application/javascript",
    ".css" => "text/css",
    ".json" => "application/json",
)

# Enable compression (optional, improves performance)
compress.cache-dir = "/var/tmp/lighttpd-compress/"
compress.filestypes = ("text/plain", "text/html", "text/javascript", "text/css")
